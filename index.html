<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>TikTok Downloader</title>
<style>
  body {
    background:#0f0f0f; color:white; font-family:Arial;
    display:flex; justify-content:center; align-items:center;
    height:100vh; margin:0;
  }
  .card {
    width:90%; max-width:420px;
    padding:25px; background:#1a1a1a;
    border-radius:15px; text-align:center;
    box-shadow:0 0 15px rgba(0,0,0,0.5);
  }
  input {
    width:100%; padding:12px; margin-top:10px;
    border:none; border-radius:10px; font-size:16px;
  }
  button {
    width:100%; padding:12px; margin-top:15px;
    background:#ff006a; color:white; border:none;
    border-radius:10px; font-size:18px; cursor:pointer;
  }
  button:hover { background:#ff1f7c; }
  a.dl-btn {
    display:block; margin-top:15px; padding:12px;
    background:#0099ff; color:white; text-decoration:none;
    border-radius:10px;
  }
</style>
</head>
<body>

<div class="card">
  <h2>TikTok Downloader</h2>
  <input id="url" placeholder="Paste TikTok link here..." />
  <button onclick="downloadTikTok()">Download</button>

  <div id="result"></div>
</div>

<script>
async function downloadTikTok() {
  const url = document.getElementById("url").value;
  const result = document.getElementById("result");

  if (!url) {
    result.innerHTML = "Please enter a valid TikTok link!";
    return;
  }

  result.innerHTML = "Loading...";

  try {
    const api = `/api/download?url=${encodeURIComponent(url)}`;
    const res = await fetch(api);
    const data = await res.json();

    if (!data.status) {
      result.innerHTML = "Invalid link!";
      return;
    }

    result.innerHTML = `
      <img src="${data.thumbnail}" width="100%" style="border-radius:10px;margin-top:10px;">
      <h3>Author: ${data.author}</h3>

      <a class="dl-btn" href="${data.video_no_watermark}" target="_blank">
        Download No-Watermark
      </a>

      <a class="dl-btn" href="${data.video_watermark}" target="_blank" style="background:#ff8800;">
        Download Watermark
      </a>

      <a class="dl-btn" href="${data.audio}" target="_blank" style="background:#00c853;">
        Download Audio (MP3)
      </a>
    `;
  } catch (e) {
    result.innerHTML = "Error fetching video!";
  }
}
</script>
</body>
</html>
